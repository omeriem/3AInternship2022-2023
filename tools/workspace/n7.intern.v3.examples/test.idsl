
thing EEG {
	connexion Bluetooth {
		@domain(Bluetooth) {
			mac = "address mac";
		}
	}
	stream eegSignal of float <100>;
}

thing ECG {
	connexion Wifi{
		@domain(Wifi) {
			k = 10;
		}
	}
	stream ecgSignal of float <150>;
}

output Consol {
	@domain(Bluetooth) {
		k = 10;
	}
}

output Database {
	@domain(Bluetooth) {
		k = 10;
	}
}

preprocessor Classifier(EEG) : [ stream x of float ] {
	@domain(DBSCAN) {
		nb_voisin = 10;
	}
}

processor MlModel (EEG):[ stream x of float ] {
	@domain(Bluetooth) {
		k = 10;
	}
}

synchronizer Synchro (EEG,ECG):  [stream x of float ]   {
	@domain(SYNCHRO_INTERPOLATION) {
		interpolate = "F.LAGRANGE";
	}
}

configuration iotFramework{
	let eeg a EEG;
	let ecg a ECG;
	let console a Consol;
	let database a Database;
	let classifiedECG;
	let cleanEEG;
	let synchronizedSignals;
	
	classifiedECG = process ecg using MlModel;
	cleanEEG = pre eeg  using Classifier;
	synchronizedSignals = synchronize classifiedECG, cleanEEG using Synchro;

	console = synchronizedSignals, eeg;
	database = classifiedECG, synchronizedSignals;
}